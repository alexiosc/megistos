<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Megistos API: BBS Channel Functionality</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a> | <a class="qindex" href="examples.html">Examples</a></div>
<h1>BBS Channel Functionality</h1>This file provides an API for controlling BBS channels.  
<a href="#_details">More...</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Modules</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>group &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__LST__flags.html">Channel modes (LST_x)</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Basic line states. <br><br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align=right valign=top>group &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__LSR__flags.html">Channel result codes (LSR_x)</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Result codes. <br><br></td></tr>

<p>
<tr><td class="memItemLeft" nowrap align=right valign=top>group &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__TTF__flags.html">Channel definition flags (TTF_x)</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Flags controlling default channel behaviour. <br><br></td></tr>

<p>
<tr><td colspan=2><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="structchannel__status__t.html">channel_status_t</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Channel status structure.  <a href="structchannel__status__t.html#_details">More...</a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="structchanneldef.html">channeldef</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Channel definition.  <a href="structchanneldef.html#_details">More...</a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>struct &nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="structchannel__status__t.html">channel_status_t</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Channel status structure.  <a href="structchannel__status__t.html#_details">More...</a><br><br></td></tr>
<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__channels.html#ga17">CHANNEL_MAGIC</a>&nbsp;&nbsp;&nbsp;"MEGISTOS BINARY CHANNEL FILE\n\n\n"</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The channel file magic number.  <a href="#ga17"></a><br><br></td></tr>
<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__channels.html#ga5">channel_getstatus</a> (char *tty, <a class="el" href="structchannel__status__t.html">channel_status_t</a> *status)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get channel status.  <a href="#ga5"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__channels.html#ga6">channel_setstatus</a> (char *tty, <a class="el" href="structchannel__status__t.html">channel_status_t</a> *status)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set channel status.  <a href="#ga6"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__channels.html#ga7">channel_setmode</a> (char *tty, <a class="el" href="config_8h.html#a155">int32</a> mode)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set channel mode.  <a href="#ga7"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__channels.html#ga8">channel_setresult</a> (char *tty, <a class="el" href="config_8h.html#a155">int32</a> result)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set channel result code.  <a href="#ga8"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__channels.html#ga9">channel_hangup</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Hangup this user's channel.  <a href="#ga9"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__channels.html#ga10">channel_disconnect</a> (char *ttyname)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Disconnect a channel.  <a href="#ga10"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>char *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__channels.html#ga11">channel_baudstg</a> (<a class="el" href="config_8h.html#a155">int32</a> baud)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Formats channel speed as a string.  <a href="#ga11"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__channels.html#ga12">chan_init</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialise the channel map.  <a href="#ga12"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="config_8h.html#a159">uint32</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__channels.html#ga13">chan_getnum</a> (char *tty)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Find the channel number of a device.  <a href="#ga13"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="config_8h.html#a159">uint32</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__channels.html#ga14">chan_getindex</a> (char *tty)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Find the index of a channel in <code>channels</code>.  <a href="#ga14"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>char *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__channels.html#ga15">chan_getname</a> (<a class="el" href="config_8h.html#a159">uint32</a> num)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Find the device associated with a channel.  <a href="#ga15"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="config_8h.html#a159">uint32</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__channels.html#ga16">chan_telnetlinecount</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Count number of telnet lines in use.  <a href="#ga16"></a><br><br></td></tr>
<tr><td colspan=2><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>char *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__channels.html#ga0">channel_states</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>char *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__channels.html#ga1">channel_results</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="structchanneldef.html">channeldef</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__channels.html#ga2">channels</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The channels index, mapping ttys to channels.  <a href="#ga2"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="structchanneldef.html">channeldef</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__channels.html#ga3">chan_last</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Last referenced element of <code>channels</code>.  <a href="#ga3"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="group__channels.html#ga4">chan_count</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Number of channels in <code>channels</code>.  <a href="#ga4"></a><br><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
This file provides an API for controlling BBS channels. 
<p>
Each channel has a number of status components:<p>
<ul>
<li>Channel mode (e.g. Normal, No-Answer, Busy, etc).</li><li>Result code (e.g. OK, RING, ERROR, etc).</li><li>Line speed where applicable (e.g. 33600 bps),</li><li>Occupant of line (a user ID, usually).</li></ul>
<p>
The functionality declared here helps deal with these aspects of channels. This is usually not for modules' use. Unless of course you have some strange module that touches channels. <hr><h2>Define Documentation</h2>
<a class="anchor" name="ga17" doxytag="ttynum.h::CHANNEL_MAGIC" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define CHANNEL_MAGIC&nbsp;&nbsp;&nbsp;"MEGISTOS BINARY CHANNEL FILE\n\n\n"          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The channel file magic number. 
<p>

<p>
Definition at line <a class="el" href="ttynum_8h-source.html#l00097">97</a> of file <a class="el" href="ttynum_8h-source.html">ttynum.h</a>.    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="ga14" doxytag="ttynum.h::chan_getindex" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="config_8h.html#a159">uint32</a> chan_getindex           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">char *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>tty</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Find the index of a channel in <code>channels</code>. 
<p>
Given a device name, this function yields the index of the channel structure in the <code>channels</code> array.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>tty</em>&nbsp;</td><td>The name of a device special, without the <code>"/dev/"</code>.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>The index of the channel associated with the given device, or -1 if the device is not associated with a BBS channel. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="ga15" doxytag="ttynum.h::chan_getname" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> char* chan_getname           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="config_8h.html#a159">uint32</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>num</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Find the device associated with a channel. 
<p>
Given the number of a channel, this function returns the device (minus the leading <code>"/dev/"</code>) associated with it.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>num</em>&nbsp;</td><td>A channel number.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>The device name of channel <code>num</code>, or <code>NULL</code> if <code>num</code> is not a existing BBS channel. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="ga13" doxytag="ttynum.h::chan_getnum" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="config_8h.html#a159">uint32</a> chan_getnum           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">char *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>tty</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Find the channel number of a device. 
<p>
Maps device name to channel number, effectively yielding the number of a channel associated with the given device.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>tty</em>&nbsp;</td><td>The name of a device special, without the <code>"/dev/"</code>.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>The channel number associated with the given device, or <code>NULL</code> if the device is not associated with a BBS channel. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="ga12" doxytag="ttynum.h::chan_init" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void chan_init           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Initialise the channel map. 
<p>
Reads the binary channel file, initialising the channel map.     </td>
  </tr>
</table>
<a class="anchor" name="ga16" doxytag="ttynum.h::chan_telnetlinecount" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="config_8h.html#a159">uint32</a> chan_telnetlinecount           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Count number of telnet lines in use. 
<p>
Returns the number of telnet lines that are currently in use.<p>
<dl compact><dt><b>Returns:</b></dt><dd>The number of telnet lines in use. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="ga11" doxytag="channels.h::channel_baudstg" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> char* channel_baudstg           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="config_8h.html#a155">int32</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>baud</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Formats channel speed as a string. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>baud</em>&nbsp;</td><td>a channel speed, as obtained with <code><a class="el" href="group__channels.html#ga5">channel_getstatus()</a></code>.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>A string denoting the user's bps rate, if applicable, or a short string describing the connection type, e.g. <code>"[NET]"</code> if the user is connected using Telnet. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="ga10" doxytag="channels.h::channel_disconnect" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int channel_disconnect           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">char *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>ttyname</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Disconnect a channel. 
<p>
This kills a channel, causing it to respawn from scratch. Any user logged at that time on is unceremoniously kicked out in the process.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>tty</em>&nbsp;</td><td>a UNIX tty name minus <code>"/dev/"</code>.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>If all goes well, 0 is returned. Anything else denotes an error and <code>errno</code> will be set accordingly). </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="ga5" doxytag="channels.h::channel_getstatus" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int channel_getstatus           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">char *&nbsp;</td>
          <td class="mdname" nowrap> <em>tty</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="structchannel__status__t.html">channel_status_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>status</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get channel status. 
<p>
Given a UNIX tty name, this function retrieves the respective channel status.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>tty</em>&nbsp;</td><td>a UNIX tty name minus <code>"/dev/"</code>.</td></tr>
    <tr><td></td><td valign=top><em>status</em>&nbsp;</td><td>a pointer to a <a class="el" href="structchannel__status__t.html">channel_status_t</a> status block where the channel status will be stored.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>if the status of the channel cannot be read from the status file, -1 is returned and the default line status <code>{LST_NORMAL</code>,LSR_OK,0,"[NO-USER]"}) is copied to <code>status</code>. If all goes well, 1 is returned.</dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="structchannel__status__t.html">channel_status_t</a>, <a class="el" href="group__channels.html#ga6">channel_setstatus()</a> </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="ga9" doxytag="channels.h::channel_hangup" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void channel_hangup           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Hangup this user's channel. 
<p>
This function causes a (UNIX) hangup of the current line. This is done the secure (and traditional) way, which is to set the baud rate of the current terminal to zero. Both UNIX and Megistos catch the death of the terminal and act accordingly.<p>
For a function to hangup another channel, see <a class="el" href="group__channels.html#ga10">channel_disconnect()</a>.<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group__channels.html#ga10">channel_disconnect()</a>. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="ga7" doxytag="channels.h::channel_setmode" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void channel_setmode           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">char *&nbsp;</td>
          <td class="mdname" nowrap> <em>tty</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="config_8h.html#a155">int32</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>mode</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Set channel mode. 
<p>
This sets the channel mode to one of the <code>LST_x</code> states. The function only affects a subset of the entire channel state, and is there for convenience.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>tty</em>&nbsp;</td><td>a UNIX tty name minus <code>"/dev/"</code>.</td></tr>
    <tr><td></td><td valign=top><em>mode</em>&nbsp;</td><td>the new mode of the line (one of the <code>LST_x</code> states).</td></tr>
  </table>
</dl>
<dl compact><dt><b>See also:</b></dt><dd>LST_x flags. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="ga8" doxytag="channels.h::channel_setresult" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void channel_setresult           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">char *&nbsp;</td>
          <td class="mdname" nowrap> <em>tty</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="config_8h.html#a155">int32</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>result</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Set channel result code. 
<p>
This sets a channel's result code to the supplied value. It only affects the result code, so it can be used to update a channel's state after its condition changes.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>tty</em>&nbsp;</td><td>a UNIX tty name minus <code>"/dev/"</code>.</td></tr>
    <tr><td></td><td valign=top><em>result</em>&nbsp;</td><td>the new result code for the line (one of the <code>LSR_x</code> flags).</td></tr>
  </table>
</dl>
<dl compact><dt><b>See also:</b></dt><dd>LSR_x flags. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="ga6" doxytag="channels.h::channel_setstatus" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int channel_setstatus           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">char *&nbsp;</td>
          <td class="mdname" nowrap> <em>tty</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="structchannel__status__t.html">channel_status_t</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>status</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Set channel status. 
<p>
Given a UNIX tty name, this function changes the channel status of the given tty according to the information passed in <code>status</code>.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td></td><td valign=top><em>tty</em>&nbsp;</td><td>a UNIX tty name minus <code>"/dev/"</code>.</td></tr>
    <tr><td></td><td valign=top><em>status</em>&nbsp;</td><td>a pointer to a <a class="el" href="structchannel__status__t.html">channel_status_t</a> status block containing the updated state for the channel.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>always returns 1, which implies success. Failure to write the state to the state file causes the module to die, logging a fatal error. This is necessary and acceptable as the channel status is only changed during critical sections in the lifetime of a user session. Custom modules should never need to call this function.</dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="structchannel__status__t.html">channel_status_t</a>, <a class="el" href="group__channels.html#ga5">channel_getstatus()</a> </dd></dl>
    </td>
  </tr>
</table>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="ga4" doxytag="ttynum.h::chan_count" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int <a class="el" href="group__channels.html#ga4">chan_count</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Number of channels in <code>channels</code>. 
<p>

<p>
Definition at line <a class="el" href="ttynum_8h-source.html#l00242">242</a> of file <a class="el" href="ttynum_8h-source.html">ttynum.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga3" doxytag="ttynum.h::chan_last" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> struct <a class="el" href="structchanneldef.html">channeldef</a>* <a class="el" href="group__channels.html#ga3">chan_last</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Last referenced element of <code>channels</code>. 
<p>

<p>
Definition at line <a class="el" href="ttynum_8h-source.html#l00237">237</a> of file <a class="el" href="ttynum_8h-source.html">ttynum.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga1" doxytag="channels.h::channel_results" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> char* <a class="el" href="group__channels.html#ga1">channel_results</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="channels_8h-source.html#l00221">221</a> of file <a class="el" href="channels_8h-source.html">channels.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga0" doxytag="channels.h::channel_states" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> char* <a class="el" href="group__channels.html#ga0">channel_states</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="channels_8h-source.html#l00220">220</a> of file <a class="el" href="channels_8h-source.html">channels.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="ga2" doxytag="ttynum.h::channels" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> struct <a class="el" href="structchanneldef.html">channeldef</a>* <a class="el" href="group__channels.html#ga2">channels</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The channels index, mapping ttys to channels. 
<p>

<p>
Definition at line <a class="el" href="ttynum_8h-source.html#l00232">232</a> of file <a class="el" href="ttynum_8h-source.html">ttynum.h</a>.    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Thu Jul 15 16:04:03 2004 for Megistos API by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>
