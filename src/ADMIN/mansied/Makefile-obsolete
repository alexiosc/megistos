include /bbs/src/Config

CC		= gcc
CPP		= gcc -E $(INCLUDES) $(CFGDEF) $(DEFINES)
STRIP		= strip
CHMOD		= chmod
CHOWN		= chown
OWNER		= bbs
GROUP		= bbs
ACCESS		= u=rwx,go=rx,o-rwx
BINARY		= mansied
TARGET		= $(BINDIR)/$(BINARY)
DEFINES		=
INCLUDES	= -Iinclude -I./ -I/bbs/src/include -I$(HDIR) -I /usr/include/ncurses
CFLAGS 		= -Wall -m486 -O2 $(CFGDEF) $(DEFINES) $(INCLUDES)
LIBS 		= -lvisual -lncurses -lbbs
CFILES		= mansied.c display.c
HFILES		= 
OFILES  	= mansied.o display.o
AFILES		=

$(TARGET):	$(OFILES) $(AFILES)
		$(CC) $(OFILES) $(AFILES) -o $(BINARY) $(DEFINES) $(CFLAGS) $(LIBS)
		$(STRIP) $(BINARY)
		$(CHMOD) $(ACCESS) $(BINARY)
		$(CHOWN) $(OWNER).$(GROUP) $(BINARY)
		mv $(BINARY) $(BINDIR)/

.depend\
depend dep:				
		for i in *.c;do echo -n "";$(CPP) -M $$i;done > .tmpdepend
		mv .tmpdepend .depend

clean:	
		@rm $(OFILES)

include .depend
