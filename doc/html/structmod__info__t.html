<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Megistos API: mod_info_t struct Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a> | <a class="qindex" href="examples.html">Examples</a></div>
<h1>mod_info_t Struct Reference<br>
<small>
[<a class="el" href="group__toplevel.html">Top-Level Module Definitions and Handlers</a>]</small>
</h1>High-level module descriptor.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="bbsmod_8h-source.html">bbsmod.h</a>&gt;</code>
<p>
Collaboration diagram for mod_info_t:<p><center><img src="structmod__info__t__coll__graph.png" border="0" usemap="#mod__info__t__coll__map" alt="Collaboration graph"></center>
<map name="mod__info__t__coll__map">
<area href="structmod__handler__t.html" shape="rect" coords="7,15,103,90" alt="">
</map>
<center><font size="2">[<a target="top" href="graph_legend.html">legend</a>]</font></center><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Data Fields</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>char *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="structmod__info__t.html#o0">progname</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The module's program name.  <a href="#o0"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>char *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="structmod__info__t.html#o1">name</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The module's full name, capitalised etc.  <a href="#o1"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>char *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="structmod__info__t.html#o2">author</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The module's <a class="el" href="structmod__info__t.html#o2">author(s)</a>.  <a href="#o2"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>char *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="structmod__info__t.html#o3">descr</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">One-sentence description of module.  <a href="#o3"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>char *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="structmod__info__t.html#o4">version</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Full RCS compatible version.  <a href="#o4"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>char *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="structmod__info__t.html#o5">shortversion</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Short, decimal (x.yy[.zz]) version.  <a href="#o5"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="structmod__handler__t.html">mod_handler_t</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="structmod__info__t.html#o6">login</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Login-time processing handler.  <a href="#o6"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="structmod__handler__t.html">mod_handler_t</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="structmod__info__t.html#o7">run</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Runtime handler.  <a href="#o7"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="structmod__handler__t.html">mod_handler_t</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="structmod__info__t.html#o8">logout</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Logout handler.  <a href="#o8"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="structmod__handler__t.html">mod_handler_t</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="structmod__info__t.html#o9">hangup</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Hangup handler.  <a href="#o9"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="structmod__handler__t.html">mod_handler_t</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="structmod__info__t.html#o10">cleanup</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Cleanup handler.  <a href="#o10"></a><br><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="structmod__handler__t.html">mod_handler_t</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="structmod__info__t.html#o11">userdel</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">User deletion handler.  <a href="#o11"></a><br><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
High-level module descriptor. 
<p>
This structure should be defined for all modules of the BBS. It contains enough information to identify the module and its capabilities to the BBS library, which can then deal with some basic command-line arguments on the module's behalf, <em>a la</em> X toolkit.<p>
A module should call the function <a class="el" href="group__toplevel.html#ga4">mod_setinfo()</a> early in its initialisation. A properly initialised <a class="el" href="structmod__info__t.html">mod_info_t</a> should be provided as argument. All string information in this structure should be filled in and pointing to permanently allocated string buffers. Handlers may be <code>NULL</code>, in which case the library considers the corresponding feature of the module not available and does not invoke it.<p>
The handler functions login(), run(), et cetera have the same form as good old <code>main()</code>: they are passed the usual <code>argc</code> and <code>argv</code> arguments and are expected to return an integer exit code. This is what the handlers do:<p>
<ul>
<li><code>login</code>. You can arrange for a (small) part of the module to run immediately after the user has authenticated themselves. This can be used, for instance, to advertise the module, provide the user with urgently needed information, perform registration or housekeeping chores, et cetera.</li></ul>
<p>
<ul>
<li><code>run</code> is the main runtime part of the module, called when a user interactively enters. This is what gives the main module menu, waits for a selection and acts on it.</li></ul>
<p>
<ul>
<li><code>logout</code> gets activated immediately before the user logs out of the system in a normal manner. This allows the module to say goodbye and perhaps provide some information. Log-out fortune cookies use this handler.</li></ul>
<p>
<ul>
<li><code>hangup</code> gets activated immediately after the user hangs up, or is kicked out of the system by an operator. There should be no interactivity here, because the user is no longer on-line. However, housekeeping tasks may need to be performed upon the user's exit from the system. Please note that due to perverse situations and possible race conditions, the <code>logout</code> handler might be called <em>in addition</em> to the <code>hangup</code> handler. If you need to do housekeeping upon a user's exit, you should check if this has already been done by another handler. Quite often both <code>hangup</code> and <code>logout</code> handlers have the same tasks to perform, and thus may call the same function which checks an internal flag to ensure it hasn't been called before.</li></ul>
<p>
<ul>
<li><code>cleanup</code> gets (typically) activated once daily to perform non-interactive maintenance. Certain large operations should be performed in the background, for instance account aging, database maintenance, et cetera.</li></ul>
<p>
<ul>
<li><code>userdel</code> is activated when a user needs to be deleted from the system. The module should remove all of its per-user files for the user ID (<a class="el" href="structuseracc__t.html#o0">useracc_t::userid</a>) that will be specified as <code>argv</code>[2] inside your module.</li></ul>
<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="structmod__handler__t.html">mod_handler_t</a>, <a class="el" href="group__toplevel.html#ga4">mod_setinfo()</a>. </dd></dl>
<dl compact><dt><b>Examples: </b></dt><dd>

<p>
<a class="el" href="mod__main_8c-example.html#_a5">mod_main.c</a>.</dl>
<p>

<p>
Definition at line <a class="el" href="bbsmod_8h-source.html#l00176">176</a> of file <a class="el" href="bbsmod_8h-source.html">bbsmod.h</a>.<hr><h2>Field Documentation</h2>
<a class="anchor" name="o2" doxytag="mod_info_t::author" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> char* <a class="el" href="structmod__info__t.html#o2">mod_info_t::author</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The module's <a class="el" href="structmod__info__t.html#o2">author(s)</a>. 
<p>

<p>
Definition at line <a class="el" href="bbsmod_8h-source.html#l00179">179</a> of file <a class="el" href="bbsmod_8h-source.html">bbsmod.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="o10" doxytag="mod_info_t::cleanup" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="structmod__handler__t.html">mod_handler_t</a> <a class="el" href="structmod__info__t.html#o10">mod_info_t::cleanup</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Cleanup handler. 
<p>

<p>
Definition at line <a class="el" href="bbsmod_8h-source.html#l00187">187</a> of file <a class="el" href="bbsmod_8h-source.html">bbsmod.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="o3" doxytag="mod_info_t::descr" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> char* <a class="el" href="structmod__info__t.html#o3">mod_info_t::descr</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
One-sentence description of module. 
<p>

<p>
Definition at line <a class="el" href="bbsmod_8h-source.html#l00180">180</a> of file <a class="el" href="bbsmod_8h-source.html">bbsmod.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="o9" doxytag="mod_info_t::hangup" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="structmod__handler__t.html">mod_handler_t</a> <a class="el" href="structmod__info__t.html#o9">mod_info_t::hangup</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Hangup handler. 
<p>

<p>
Definition at line <a class="el" href="bbsmod_8h-source.html#l00186">186</a> of file <a class="el" href="bbsmod_8h-source.html">bbsmod.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="o6" doxytag="mod_info_t::login" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="structmod__handler__t.html">mod_handler_t</a> <a class="el" href="structmod__info__t.html#o6">mod_info_t::login</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Login-time processing handler. 
<p>

<p>
Definition at line <a class="el" href="bbsmod_8h-source.html#l00183">183</a> of file <a class="el" href="bbsmod_8h-source.html">bbsmod.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="o8" doxytag="mod_info_t::logout" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="structmod__handler__t.html">mod_handler_t</a> <a class="el" href="structmod__info__t.html#o8">mod_info_t::logout</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Logout handler. 
<p>

<p>
Definition at line <a class="el" href="bbsmod_8h-source.html#l00185">185</a> of file <a class="el" href="bbsmod_8h-source.html">bbsmod.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="o1" doxytag="mod_info_t::name" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> char* <a class="el" href="structmod__info__t.html#o1">mod_info_t::name</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The module's full name, capitalised etc. 
<p>

<p>
Definition at line <a class="el" href="bbsmod_8h-source.html#l00178">178</a> of file <a class="el" href="bbsmod_8h-source.html">bbsmod.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="o0" doxytag="mod_info_t::progname" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> char* <a class="el" href="structmod__info__t.html#o0">mod_info_t::progname</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The module's program name. 
<p>

<p>
Definition at line <a class="el" href="bbsmod_8h-source.html#l00177">177</a> of file <a class="el" href="bbsmod_8h-source.html">bbsmod.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="o7" doxytag="mod_info_t::run" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="structmod__handler__t.html">mod_handler_t</a> <a class="el" href="structmod__info__t.html#o7">mod_info_t::run</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Runtime handler. 
<p>

<p>
Definition at line <a class="el" href="bbsmod_8h-source.html#l00184">184</a> of file <a class="el" href="bbsmod_8h-source.html">bbsmod.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="o5" doxytag="mod_info_t::shortversion" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> char* <a class="el" href="structmod__info__t.html#o5">mod_info_t::shortversion</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Short, decimal (x.yy[.zz]) version. 
<p>

<p>
Definition at line <a class="el" href="bbsmod_8h-source.html#l00182">182</a> of file <a class="el" href="bbsmod_8h-source.html">bbsmod.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="o11" doxytag="mod_info_t::userdel" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="structmod__handler__t.html">mod_handler_t</a> <a class="el" href="structmod__info__t.html#o11">mod_info_t::userdel</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
User deletion handler. 
<p>

<p>
Definition at line <a class="el" href="bbsmod_8h-source.html#l00188">188</a> of file <a class="el" href="bbsmod_8h-source.html">bbsmod.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="o4" doxytag="mod_info_t::version" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> char* <a class="el" href="structmod__info__t.html#o4">mod_info_t::version</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Full RCS compatible version. 
<p>

<p>
Definition at line <a class="el" href="bbsmod_8h-source.html#l00181">181</a> of file <a class="el" href="bbsmod_8h-source.html">bbsmod.h</a>.    </td>
  </tr>
</table>
<hr>The documentation for this struct was generated from the following file:<ul>
<li><a class="el" href="bbsmod_8h-source.html">bbsmod.h</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Thu Jul 15 16:04:03 2004 for Megistos API by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>
